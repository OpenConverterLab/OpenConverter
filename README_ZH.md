# OpenConverter

[![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=OpenConverterLab_OpenConverter&metric=alert_status)](https://sonarcloud.io/summary/new_code?id=OpenConverterLab_OpenConverter)

## ğŸ“¢  é¡¹ç›®ä»‹ç»

OpenConverter æ˜¯ä¸€ä¸ªåŸºäº **FFmpeg**æºä»£ç ã€**Qt**å¼€æºæ¡†æ¶ã€**BMFæ¡†æ¶**æ„å»ºçš„è½¯ä»¶ï¼Œå®ƒæä¾›äº†ä¸€äº›ç®€å•æ˜“ç”¨çš„å·¥å…·ï¼Œå¯ä»¥æ–¹ä¾¿åœ°è½¬æ¢ã€ç¼–è¾‘å’Œå¤„ç†éŸ³è§†é¢‘æ–‡ä»¶ã€‚

è¿™æ¬¾è½¬æ¢å™¨å…·æœ‰ä»¥ä¸‹ä¸»è¦åŠŸèƒ½ï¼š

1. æ”¯æŒæ›´æ”¹éŸ³è§†é¢‘ç¼–è§£ç å™¨ä»¥è¿›è¡Œç¼–ç ï¼ˆä¾‹å¦‚libx264ï¼Œlibx265ï¼Œaacï¼Œac3ï¼‰ï¼Œæ”¯æŒåˆ†è¾¨ç‡ç¼©æ”¾å’Œåƒç´ æ ¼å¼è½¬æ¢
2. æ”¯æŒæ— ç¼–ç è½¬æ¢å¤šåª’ä½“ã€‚
3. æ”¯æŒæ˜¾ç¤ºå¤šåª’ä½“æ–‡ä»¶ä¸­è§†é¢‘å’ŒéŸ³é¢‘æµçš„ä¿¡æ¯ã€‚
4. æ”¯æŒå›¾ç‰‡å‹ç¼©ï¼Œå¯è°ƒæ•´æ ¼å¼å’Œè´¨é‡ã€‚
5. æ”¯æŒä»è§†é¢‘ä¸­æå–éŸ³é¢‘ã€‚
6. æ”¯æŒè§†é¢‘å‰ªåˆ‡ï¼Œå†…ç½®FFmpegæ’­æ”¾å™¨ï¼Œç²¾ç¡®æ—¶é—´é€‰æ‹©ã€‚
7. **æ”¯æŒæ‰¹é‡å¤„ç†ï¼Œé˜Ÿåˆ—ç®¡ç†å¤šä¸ªæ–‡ä»¶ã€‚**
8. æ”¯æŒå¹³æ»‘çš„è¿›åº¦è·Ÿè¸ªå’Œå‡†ç¡®çš„å‰©ä½™æ—¶é—´æ˜¾ç¤ºã€‚
9. è¿è¡Œæ—¶åˆ‡æ¢è½¬ç å†…æ ¸ï¼ˆFFmpegã€FFToolã€BMFï¼‰
10. æä¾›å›¾å½¢ç•Œé¢å’Œå‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰åŒé‡æ”¯æŒã€‚

æœ¬é¡¹ç›®ä½¿ç”¨[Qtæ¡†æ¶](./doc/Qt.md)ã€FFmpegåº“ã€[BMFæ¡†æ¶](https://github.com/BabitMF/bmf)å®Œæˆå¼€å‘ã€‚

FFmpeg å¼€å‘æ•™ç¨‹å¯å‚è€ƒ [Learn FFmpeg the Hard Way](https://github.com/TSGU-OSC/Learn_FFmpeg_the_Hard_Way)

## ğŸŒŸ  åŠŸèƒ½è¯¦è§£

è¿è¡Œ OpenConverter åï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å¹¶ä½¿ç”¨ä»¥ä¸‹åŠŸèƒ½ï¼š

<div align="center">

<img src="./img/info_view.png" style="width:80%">

<img src="./img/compress_picture.png" style="width:80%">

<img src="./img/cut_video.png" style="width:80%">

</div>

### 1. æ”¯æŒæ›´æ”¹éŸ³è§†é¢‘ç¼–è§£ç å™¨ä»¥è¿›è¡Œç¼–ç ï¼ˆä¾‹å¦‚libx264ï¼Œlibx265ï¼Œaacï¼Œac3ï¼‰

è¿™æ¬¾è½¬æ¢å™¨å…è®¸ç”¨æˆ·è½»æ¾åœ°æ›´æ”¹éŸ³è§†é¢‘ç¼–è§£ç å™¨ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä½¿ç”¨libx264æˆ–libx265ç¼–ç å™¨ï¼Œä»¥è·å¾—æ›´é«˜çš„å‹ç¼©ç‡å’Œæ›´å¥½çš„è§†é¢‘è´¨é‡ã€‚

æ­¤å¤–è¿˜æ”¯æŒï¼š
- **åˆ†è¾¨ç‡ç¼©æ”¾**ï¼ˆä¾‹å¦‚ï¼š1920x1080 â†’ 1280x720ï¼Œ4K â†’ 1080pï¼‰
- **åƒç´ æ ¼å¼è½¬æ¢**ï¼ˆä¾‹å¦‚ï¼šyuv420pã€yuv444pã€rgb24ï¼‰
- è§†é¢‘å’ŒéŸ³é¢‘çš„æ¯”ç‰¹ç‡æ§åˆ¶
- ä½¿ç”¨qscaleå‚æ•°è¿›è¡Œè´¨é‡æ§åˆ¶

### 2. æ”¯æŒæ— ç¼–ç è½¬æ¢å¤šåª’ä½“ã€‚

è¯¥è½¬æ¢å™¨è¿˜æ”¯æŒæ— éœ€ç¼–ç å³å¯è½¬æ¢å¤šåª’ä½“æ–‡ä»¶ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨ä¸æ”¹å˜åŸå§‹è§†é¢‘å’ŒéŸ³é¢‘æµçš„æƒ…å†µä¸‹ï¼Œç›´æ¥å°†æ–‡ä»¶ä»ä¸€ç§æ ¼å¼è½¬æ¢ä¸ºå¦ä¸€ç§æ ¼å¼ã€‚è¿™å¯¹äºå¿«é€Ÿè½¬æ¢æ–‡ä»¶éå¸¸æœ‰ç”¨ã€‚

### 3. æ”¯æŒæ˜¾ç¤ºå¤šåª’ä½“æ–‡ä»¶ä¸­è§†é¢‘å’ŒéŸ³é¢‘æµçš„ä¿¡æ¯

è¿™æ¬¾è½¬æ¢å™¨å¯ä»¥æ˜¾ç¤ºæœ‰å…³è§†é¢‘å’ŒéŸ³é¢‘æµçš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åˆ†è¾¨ç‡ã€å¸§ç‡ã€æ¯”ç‰¹ç‡ç­‰ã€‚è¿™æœ‰åŠ©äºæ‚¨äº†è§£å¤šåª’ä½“æ–‡ä»¶çš„å±æ€§ï¼Œä»¥ä¾¿åœ¨è½¬æ¢è¿‡ç¨‹ä¸­è¿›è¡Œç›¸åº”çš„è°ƒæ•´ã€‚

### 4. å›¾ç‰‡å‹ç¼©

æ”¯æŒå›¾ç‰‡å‹ç¼©ï¼Œå¯è‡ªå®šä¹‰è®¾ç½®ï¼š
- æ ¼å¼è½¬æ¢ï¼ˆJPEGã€PNGã€WebPã€BMPï¼‰
- åˆ†è¾¨ç‡è°ƒæ•´
- è´¨é‡æ§åˆ¶ï¼ˆ1-31ï¼‰

### 5. éŸ³é¢‘æå–

ä»è§†é¢‘ä¸­æå–éŸ³é¢‘ï¼Œæ”¯æŒç¼–ç å™¨é€‰æ‹©ï¼š
- å¤šç§éŸ³é¢‘æ ¼å¼ï¼ˆMP3ã€AACã€AC3ã€FLACã€WAVï¼‰
- æ¯”ç‰¹ç‡æ§åˆ¶

### 6. è§†é¢‘å‰ªåˆ‡

ç²¾ç¡®å‰ªåˆ‡è§†é¢‘ç‰‡æ®µï¼š
- å†…ç½®FFmpegè§†é¢‘æ’­æ”¾å™¨
- å®æ—¶æ’­æ”¾å’Œå®šä½
- ç²¾ç¡®çš„å¼€å§‹/ç»“æŸæ—¶é—´é€‰æ‹©
- æ”¯æŒæ‰€æœ‰FFmpegå…¼å®¹æ ¼å¼

### 7. æ‰¹é‡å¤„ç†

é«˜æ•ˆå¤„ç†å¤šä¸ªæ–‡ä»¶ï¼š
- **å¯è§†åŒ–æ–‡ä»¶è¿‡æ»¤å™¨ç®¡ç†**ï¼ŒåŸºäºæ ‡ç­¾çš„ç•Œé¢
- å•ç‹¬æ·»åŠ æ–‡ä»¶æˆ–æ‰«ææ•´ä¸ªç›®å½•
- é˜Ÿåˆ—ç®¡ç†ï¼Œè¿›åº¦ç›‘æ§
- å¯é…ç½®è¾“å‡ºç›®å½•å’Œæ–‡ä»¶åç¼€
- æ”¯æŒè½¬ç ã€æå–éŸ³é¢‘ã€å‹ç¼©å›¾ç‰‡å’Œåˆ›å»ºGIFæ“ä½œ
- é˜Ÿåˆ—ä¸­æ¯ä¸ªæ–‡ä»¶çš„å®æ—¶è¿›åº¦è·Ÿè¸ª

### 8. é«˜çº§è¿›åº¦è·Ÿè¸ªå’Œæ—¶é—´ä¼°ç®—

åœ¨è½¬æ¢æ–‡ä»¶æ—¶ï¼Œè¯¥æ’­æ”¾å™¨æä¾›ï¼š
- å¹³æ»‘çš„è¿›åº¦æ›´æ–°ï¼Œå…·æœ‰UIå‹å¥½çš„åˆ·æ–°ç‡
- ä½¿ç”¨æŒç»­æ—¶é—´å¹³æ»‘çš„å‡†ç¡®å‰©ä½™æ—¶é—´ä¼°ç®—
- å®æ—¶è¿›åº¦ç™¾åˆ†æ¯”å’ŒæŒç»­æ—¶é—´è·Ÿè¸ª
- è¯¦ç»†çš„æ§åˆ¶å°è¾“å‡ºï¼Œç”¨äºç›‘æ§è½¬æ¢çŠ¶æ€

### 9. è¿è¡Œæ—¶åˆ‡æ¢è½¬ç å†…æ ¸ï¼ˆFFmpegã€FFToolã€BMFï¼‰

è¯¥è½¯ä»¶æä¾›ä¸‰ç§ä¸åŒçš„è½¬ç å†…æ ¸ä¾›é€‰æ‹©ï¼š
- åŸºäºFFmpeg APIçš„å†…æ ¸ï¼Œç”¨äºç›´æ¥åº“é›†æˆ
- FFToolå†…æ ¸ï¼Œç”¨äºå‘½ä»¤è¡Œå·¥å…·é›†æˆ
- åŸºäºBMFæ¡†æ¶çš„å†…æ ¸ï¼Œç”¨äºé«˜çº§å¤„ç†
æ‚¨è¿˜å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©æ€§ç¼–è¯‘è¿™äº›å†…æ ¸ã€‚

### 10. å‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰æ”¯æŒ

éå›¾å½¢ç•Œé¢æ¨¡å¼ä½¿ç”¨æ–¹æ³•ï¼š
```bash
> ./OpenConverter
Usage: ./OpenConverter [options] input_file output_file
Options:
  --transcoder TYPE        Set transcoder type (FFMPEG, BMF, FFTOOL)
  -v, --video-codec CODEC  Set video codec (could set copy)
  -q, --qscale QSCALE      Set qscale for video codec
  -a, --audio-codec CODEC  Set audio codec (could set copy)
  -b:v, --bitrate:video BITRATE    Set bitrate for video codec
  -b:a, --bitrate:audio BITRATE    Set bitrate for audio codec
  -pix_fmt PIX_FMT         Set pixel format for video
  -scale SCALE(w)x(h)      Set scale for video (width x height)
  -ss START_TIME           Set start time for cutting (format: HH:MM:SS or seconds)
  -to END_TIME             Set end time for cutting (format: HH:MM:SS or seconds)
  -t DURATION              Set duration for cutting (format: HH:MM:SS or seconds)
  -h, --help               Show this help message

Note: Use either -to or -t, not both. If both are specified, -to takes precedence.
```

ä½¿ç”¨ç¤ºä¾‹ï¼š
```bash
# ä½¿ç”¨FFmpegå†…æ ¸å’ŒH.264ç¼–ç å™¨è½¬æ¢è§†é¢‘
./OpenConverter -t FFMPEG -v libx264 input.mp4 output.mp4

# ä½¿ç”¨BMFå†…æ ¸ï¼ŒH.265è§†é¢‘ç¼–ç å™¨å’ŒAACéŸ³é¢‘ç¼–ç å™¨è½¬æ¢è§†é¢‘
./OpenConverter -t BMF -v libx265 -a aac input.mp4 output.mp4
```

## ä½¿ç”¨æŒ‡å—
å¦‚æœåœ¨è¿è¡Œè¿‡ç¨‹é‡åˆ°é—®é¢˜ï¼Œæ¬¢è¿æŸ¥çœ‹æˆ‘ä»¬çš„[ä½¿ç”¨æŒ‡å—æ–‡æ¡£](./doc/OpenConverter_Usage.md)

## ğŸ“– è´¡çŒ®æŒ‡å—

å¦‚æœä½ æœ‰å…´è¶£è´¡çŒ®é¡¹ç›®æˆ–å‘ç°äº†é”™è¯¯ï¼Œè¯·å‚è€ƒæˆ‘ä»¬çš„ [è´¡çŒ®æŒ‡å—](./CONTRIBUTING.md)

## â˜˜ï¸ è®¸å¯è¯

OpenConverter æ˜¯åŸºäº Apache 2.0 è®¸å¯è¯å¼€æºçš„ã€‚è¯·åœ¨ä½¿ç”¨å‰é˜…è¯» [LICENSE](./LICENSE) æ–‡ä»¶ã€‚
